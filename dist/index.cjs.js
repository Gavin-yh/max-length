"use strict";var e,n={innerText:"",innerHTML:""};module.exports=function(t){var r=t.dom,i=t.maxLength;if(r&&i){var a=function(){var e=window.getSelection().getRangeAt(0),t=document.createElement("span");t.classList.add("template_span"),e.insertNode(t),n.innerHTML=r.innerHTML,n.innerText=r.innerText.replace(/\r|\n|(\r\n)/g,"")},o=function(e){var t=i-n.innerText.length;t<e.data.length?c(e.data,t):l()},d=function(e){if(a(),!("ActiveXObject"in window)){n.innerHTML=r.innerHTML,n.innerText=r.innerText.replace(/\r|\n|(\r\n)/g,"");var t=i-n.innerText.length,o=e.clipboardData,d="";t<(d=null==o?window.clipboardData&&window.clipboardData.getData("text"):o.getData("text/plain")).length?(e.preventDefault(),c(d,t)):l()}},s=function(e){e.target.innerText.length>=i&&8!==e.keyCode&&e.preventDefault()},c=function(t,i){r.innerHTML=n.innerHTML;var a=t.slice(0,i),o=l();(e=document.createDocumentFragment()).append(a),o.insertNode(e),o.collapse()};return r.addEventListener("keydown",s),r.addEventListener("paste",d),r.addEventListener("compositionstart",a),r.addEventListener("compositionend",o),function(){r.removeEventListener("keydown",s),r.removeEventListener("paste",d),r.removeEventListener("compositionstart",a),r.removeEventListener("compositionend",o)}}function l(){var e=window.getSelection().getRangeAt(0),n=document.getElementsByClassName("template_span")[0];return e.selectNode(n),e.deleteContents(),e}};
