var e,n={innerText:"",innerHTML:""},t=function(t){var r=t.dom,a=t.maxLength;if(r&&a){var i=function(){var e=window.getSelection().getRangeAt(0),t=document.createElement("span");t.classList.add("template_span"),e.insertNode(t),n.innerHTML=r.innerHTML,n.innerText=r.innerText.replace(/\r|\n|(\r\n)/g,"")},o=function(e){var t=a-n.innerText.length;t<e.data.length?c(e.data,t):l()},d=function(e){if(i(),!("ActiveXObject"in window)){n.innerHTML=r.innerHTML,n.innerText=r.innerText.replace(/\r|\n|(\r\n)/g,"");var t=a-n.innerText.length,o=e.clipboardData,d="";t<(d=null==o?window.clipboardData&&window.clipboardData.getData("text"):o.getData("text/plain")).length?(e.preventDefault(),c(d,t)):l()}},s=function(e){e.target.innerText.length>=a&&8!==e.keyCode&&e.preventDefault()},c=function(t,a){r.innerHTML=n.innerHTML;var i=t.slice(0,a),o=l();(e=document.createDocumentFragment()).append(i),o.insertNode(e),o.collapse()};return r.addEventListener("keydown",s),r.addEventListener("paste",d),r.addEventListener("compositionstart",i),r.addEventListener("compositionend",o),function(){r.removeEventListener("keydown",s),r.removeEventListener("paste",d),r.removeEventListener("compositionstart",i),r.removeEventListener("compositionend",o)}}function l(){var e=window.getSelection().getRangeAt(0),n=document.getElementsByClassName("template_span")[0];return e.selectNode(n),e.deleteContents(),e}};export{t as default};
